(function(){emojify.setConfig({only_crawl_id:null,img_dir:SG.EMOJI_DOMAIN,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),SG.TopicAppend=function(){},SG.TopicAppend.prototype=new SG.Publisher,jQuery(document).ready(function(e){e(".need-autogrow").autoGrow(),e("#content").on("keydown",function(e){if(9==e.keyCode){e.preventDefault();var t=this.selectionStart,n=this.selectionEnd,i=window.getSelection().toString();i="\t"+i.replace(/\n/g,"\n\t"),this.value=this.value.substring(0,t)+i+this.value.substring(n),this.setSelectionRange(t+"\t".length,t+i.length)}}),e("#content").on("input propertychange",function(){var t=e(this).val();marked=SG.markSettingNoHightlight();var n=marked(t);n=SG.replaceCodeChar(n),e("#content-preview").html(n),emojify.run(e("#content-preview").get(0))}),e("#submit").on("click",function(t){t.preventDefault();if(!e(".validate-form").validate().form())return!1;(new SG.TopicAppend).publish(this)}),e(document).keypress(function(t){!t.ctrlKey||10!=t.which&&13!=t.which||e("#submit").click()}),SG.registerAtEvent()})}).call(this);